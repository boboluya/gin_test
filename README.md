å¤ªå¥½äº†ï¼æ¥ç‚¹**è´´è¿‘å®é™…é¡¹ç›®çš„å®æˆ˜ç»ƒä¹ **ï¼

æˆ‘ä»¬è®¾è®¡ä¸€ä¸ª **â€œç”¨æˆ·ç®¡ç†ä¸­å¿ƒâ€** çš„ç®€åŒ–ç‰ˆï¼ŒåŠŸèƒ½å®Œæ•´ã€ç»“æ„æ¸…æ™°ï¼Œé€‚åˆç»ƒæ‰‹ Gin çš„æ ¸å¿ƒèƒ½åŠ›ï¼š

---

## ğŸ¯ é¡¹ç›®åç§°ï¼š`ç”¨æˆ·ç®¡ç† API æœåŠ¡ï¼ˆæ¨¡æ‹Ÿç‰ˆï¼‰`

> ä¸è¿æ•°æ®åº“ï¼Œæ•°æ®å­˜åœ¨å†…å­˜ï¼ˆ`map`ï¼‰ï¼Œæ”¯æŒ CRUD + åˆ†é¡µ + æœç´¢ + ç™»å½•é‰´æƒ + æ–‡ä»¶ä¸Šä¼ å¤´åƒ + ä¸­é—´ä»¶

---

## âœ… åŠŸèƒ½éœ€æ±‚ï¼ˆè´´è¿‘çœŸå®é¡¹ç›®ï¼‰

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸ” ç”¨æˆ·ç™»å½• | `POST /api/login`ï¼Œè¿”å› tokenï¼ˆæ¨¡æ‹Ÿï¼‰ |
| ğŸ“‹ è·å–ç”¨æˆ·åˆ—è¡¨ | `GET /api/users`ï¼Œæ”¯æŒåˆ†é¡µã€å…³é”®å­—æœç´¢ |
| ğŸ‘¤ è·å–ç”¨æˆ·è¯¦æƒ… | `GET /api/users/:id` |
| â• åˆ›å»ºç”¨æˆ· | `POST /api/users`ï¼Œå¸¦å¤´åƒä¸Šä¼  |
| âœï¸ æ›´æ–°ç”¨æˆ· | `PUT /api/users/:id` |
| âŒ åˆ é™¤ç”¨æˆ· | `DELETE /api/users/:id` |
| ğŸ›¡ï¸ æƒé™æ§åˆ¶ | éç™»å½•ç”¨æˆ·ä¸èƒ½æ“ä½œï¼ˆé™¤ç™»å½•å¤–ï¼‰ |
| ğŸ“ å¤´åƒä¸Šä¼  | ä¸Šä¼ æ–‡ä»¶å¹¶ä¿å­˜åˆ°æœ¬åœ° `/uploads` |
| ğŸ“„ é™æ€æ–‡ä»¶è®¿é—® | ä¸Šä¼ çš„å¤´åƒå¯ç›´æ¥æµè§ˆå™¨è®¿é—® |

---

## ğŸ§± æ•°æ®ç»“æ„è®¾è®¡ï¼ˆæ¨¡æ‹Ÿï¼‰

```go
type User struct {
    ID       string `json:"id"`
    Name     string `json:"name"`
    Email    string `json:"email"`
    Role     string `json:"role"`     // admin/user
    Avatar   string `json:"avatar"`   // å¤´åƒæ–‡ä»¶å
    CreatedAt string `json:"created_at"`
}
```

å†…å­˜å­˜å‚¨ï¼š
```go
var users = map[string]User{
    "1": {ID: "1", Name: "admin", Email: "admin@example.com", Role: "admin", CreatedAt: "2024-01-01"},
}
```

---

## ğŸ“¡ æ¥å£åˆ—è¡¨

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ | éœ€è¦ç™»å½• |
|------|------|------|--------|
| POST | `/api/login` | ç™»å½•ï¼Œè¿”å› token | âŒ |
| GET  | `/api/users` | åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·ï¼Œæ”¯æŒ `?keyword=xxx&page=1&limit=10` | âœ… |
| GET  | `/api/users/:id` | æŸ¥çœ‹ç”¨æˆ·è¯¦æƒ… | âœ… |
| POST | `/api/users` | åˆ›å»ºç”¨æˆ·ï¼ˆå«å¤´åƒä¸Šä¼ ï¼‰ | âœ…ï¼ˆä»… adminï¼‰ |
| PUT  | `/api/users/:id` | æ›´æ–°ç”¨æˆ·ä¿¡æ¯ | âœ…ï¼ˆä»… admin æˆ–è‡ªå·±ï¼‰ |
| DELETE | `/api/users/:id` | åˆ é™¤ç”¨æˆ· | âœ…ï¼ˆä»… adminï¼‰ |
| GET  | `/uploads/*filepath` | è®¿é—®ä¸Šä¼ çš„å¤´åƒ | âŒ |

---

## ğŸ” é‰´æƒè§„åˆ™ï¼ˆæ¨¡æ‹Ÿï¼‰

- ç™»å½•åè¿”å›ä¸€ä¸ª `token=mock-token-123`
- æ‰€æœ‰è¯·æ±‚é€šè¿‡ `Authorization: Bearer mock-token-123` éªŒè¯
- ä¸­é—´ä»¶æ ¡éªŒ token æ˜¯å¦æœ‰æ•ˆ
- `Role = admin` æ‰èƒ½åˆ›å»º/åˆ é™¤ç”¨æˆ·
- æ™®é€šç”¨æˆ·åªèƒ½æŸ¥çœ‹å’Œæ›´æ–°è‡ªå·±ï¼ˆè¿›é˜¶å¯åšï¼Œå…ˆåš admin å…¨æƒï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„å»ºè®®

```
project/
â”œâ”€â”€ main.go
â”œâ”€â”€ uploads/          // å­˜æ”¾ä¸Šä¼ å¤´åƒ
â””â”€â”€ data/             // å¯é€‰ï¼šæ¨¡æ‹Ÿæ•°æ®åˆå§‹åŒ–
```

---

## ğŸ§© æŠ€æœ¯ç‚¹è¦†ç›–ï¼ˆä½ å°†ç»ƒä¹ åˆ°ï¼‰

| æŠ€æœ¯ç‚¹ | æ˜¯å¦åŒ…å« |
|--------|----------|
| è·¯ç”±åˆ†ç»„ | âœ… |
| ä¸­é—´ä»¶ï¼ˆé‰´æƒï¼‰ | âœ… |
| JSON ç»‘å®šä¸æ ¡éªŒ | âœ… |
| æ–‡ä»¶ä¸Šä¼  | âœ… |
| é™æ€æ–‡ä»¶æœåŠ¡ | âœ… |
| è·¯å¾„å‚æ•° `:id` | âœ… |
| æŸ¥è¯¢å‚æ•° `?page=` | âœ… |
| æ¨¡æ‹Ÿæ•°æ®å­˜å‚¨ | âœ… |
| æ¨¡æ‹Ÿ token é‰´æƒ | âœ… |
| é”™è¯¯å¤„ç† | âœ… |

---

## ğŸš€ å¯åŠ¨å‘½ä»¤å»ºè®®

```bash
go run main.go
```

æœåŠ¡å¯åŠ¨åï¼š

- è®¿é—®ï¼š`http://localhost:8080/api/users`ï¼ˆéœ€å…ˆç™»å½•ï¼‰
- ä¸Šä¼ å¤´åƒï¼šç”¨ Postman ä¼  `multipart/form-data`ï¼Œå­—æ®µå `avatar`

---

## ğŸ§ª æµ‹è¯•å»ºè®®é¡ºåº

1. âœ… å…ˆå®ç° `/api/login`ï¼Œæ‹¿åˆ° token
2. âœ… å®ç° `/api/users` åˆ—è¡¨ï¼ˆå…ˆä¸åˆ†é¡µï¼‰
3. âœ… åŠ åˆ†é¡µå’Œæœç´¢
4. âœ… å®ç° `/api/users/:id` æŸ¥çœ‹
5. âœ… å®ç° POST åˆ›å»ºç”¨æˆ· + ä¸Šä¼ å¤´åƒ
6. âœ… åŠ ä¸­é—´ä»¶é‰´æƒ
7. âœ… å‰©ä¸‹ PUT / DELETE

---

## ğŸ’¡ æç¤ºï¼štoken é‰´æƒä¸­é—´ä»¶æ¨¡æ¿

```go
func authMiddleware(c *gin.Context) {
    token := c.GetHeader("Authorization")
    if token != "Bearer mock-token-123" {
        c.AbortWithStatusJSON(401, gin.H{"error": "æœªç™»å½•"})
        return
    }
    // å¯ä»¥åœ¨è¿™é‡Œ set user ä¿¡æ¯åˆ° Context
    c.Set("user_id", "1") // æ¨¡æ‹Ÿç™»å½•ç”¨æˆ·
    c.Next()
}
```

---

## ğŸ Bonusï¼šè¿›é˜¶æŒ‘æˆ˜ï¼ˆåšå®ŒåŸºç¡€åå¯é€‰ï¼‰

- æ”¯æŒâ€œåªèƒ½ä¿®æ”¹è‡ªå·±â€çš„é€»è¾‘
- ä¸Šä¼ å¤´åƒæ—¶é™åˆ¶æ ¼å¼ï¼ˆjpg/pngï¼‰å’Œå¤§å°ï¼ˆ<5MBï¼‰
- è¿”å›ç»Ÿä¸€å“åº”æ ¼å¼ï¼š`{ "code": 0, "msg": "ok", "data": {} }`
- ä½¿ç”¨ `uuid` ç”Ÿæˆç”¨æˆ· ID
- åŠ æ—¥å¿—ä¸­é—´ä»¶

---

## âœ… ä¸‹ä¸€æ­¥

ä½ å¯ä»¥å¼€å§‹å†™äº†ï¼  
å†™å®ŒæŸä¸ªæ¥å£ï¼Œå¯ä»¥å‘ç»™æˆ‘çœ‹ï¼Œæˆ‘å¸®ä½  reviewã€‚  
æˆ–è€…ä½ å¡ä½äº†ï¼Œå‘Šè¯‰æˆ‘å“ªä¸€æ­¥ï¼Œæˆ‘ç»™ä½ æç¤ºæˆ–ä»£ç ç‰‡æ®µã€‚

> æƒ³è¦æˆ‘å…ˆç»™ä½ ä¸€ä¸ª **éª¨æ¶ä»£ç æ¨¡æ¿**ï¼ˆå¸¦è·¯ç”±å’Œç»“æ„ä½“ï¼‰å—ï¼Ÿéšæ—¶è¯´ï¼

è¿™ä¸ªé¡¹ç›®ç»ƒå®Œï¼Œä½ å°±èƒ½è‡ªä¿¡åœ°è¯´ï¼š**â€œæˆ‘ä¼šç”¨ Gin åšä¸€ä¸ªå®Œæ•´çš„åç«¯æœåŠ¡äº†ï¼â€** ğŸ’ª